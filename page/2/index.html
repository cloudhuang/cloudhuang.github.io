<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>TechNotes</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="TechNotes"><meta name=author content="TechNotes"><link rel=canonical href=https://technotes.guru/><meta name=google-site-verification content="G-V4HC5K9V2M"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.030f3f25d9f3449b524f810ddd2c31b9d4718215f17a58bacbd906ecaf639910.css integrity="sha256-Aw8/JdnzRJtST4EN3SwxudRxghXxeli6y9kG7K9jmRA=" rel="preload stylesheet" as=style><link rel=icon href=https://technotes.guru/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://technotes.guru/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://technotes.guru/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://technotes.guru/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://technotes.guru/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=https://technotes.guru/index.xml><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="TechNotes"><meta property="og:description" content="TechNotes"><meta property="og:type" content="website"><meta property="og:url" content="https://technotes.guru/"><meta property="og:site_name" content="TechNotes"><meta name=twitter:card content="summary"><meta name=twitter:title content="TechNotes"><meta name=twitter:description content="TechNotes"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"TechNotes","url":"https://technotes.guru/","description":"TechNotes","thumbnailUrl":"https://technotes.guru/%3Clink%20/%20abs%20url%3E","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://technotes.guru/ accesskey=h title="TechNotes (Alt + H)">TechNotes</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://technotes.guru/categories/ title=categories><span>categories</span></a></li><li><a href=https://technotes.guru/tags/ title=tags><span>tags</span></a></li><li><a href=https://technotes.guru/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>基于区块链的公益捐赠平台</h2></header><section class=entry-content><p>企业/个人与公益组织信息不对称，企业找不到捐赠对象，公益组织找不到想要捐赠企业
当某个企业与公益组织达成捐赠合作后，也往往面临的很多的问题：
捐赠中涉及的款项不透明，监管难度较大 公益组织本身不是盈利机构，需要将捐赠款项中的一部分作为公益组织的公益费用 按照捐赠协议，比如本次捐赠需要涉及多次活动，管理难度加大，费用使用情况复杂 以企业捐赠为例，企业为了履行其社会责任，决定发起一个捐赠，捐赠金额50万，捐赠3个项目。其中总金额的10%，5万元作为对应公益组织的费用。
场景：
企业发布公益计划，包括捐赠金额，活动要求等信息，公益活动方向，如针对贫困地区儿童的放心早餐项目 公益组织提交其组织资料，资质等信息，以及相应的活动策划信息 企业与公益组织签订协议 协议内容： – 活动的捐赠额 – 捐赠的钱是一次到账，还是按照活动数分批次，每举办一次活动转一次账 活动的活动周期多久，如一年的放心早餐 – 多少费用作为公益组织的费用 – 活动的命名 – 其他一些活动信息 公益组织按照协议条款履行协议内容 企业按照协议条框履行协议内容 按照协议履行的情况增加或者减少Token 过程中涉及的文件，照片等上链存证 方向上可以分为：
2G方向: 企业/个人社会责任指数、公益组织社会责任指数 2C方向：Token积分兑换物品，社区商城</p></section><footer class=entry-footer>2018-05-05&nbsp;·&nbsp;1 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to 基于区块链的公益捐赠平台" href=https://technotes.guru/posts/2008/blockchain-based-philanthropic-platform/></a></article><article class=post-entry><header class=entry-header><h2>以太坊智能合约开发入门</h2></header><section class=entry-content><p>搭建智能合约开发环境 智能合约的开发环境依赖于node/npm，所以在构建开发环境之前需要确保开发机器已经安装好了node/npm的环境了。
如何还没有安装，那么在mac下面可以通过brew命令非常快速的安装 brew install node 或者自己下载node的安装包安装。 然后分别安装下面的几个开发智能合约需要用到的工具:
Web3 JS - 开发以太坊客户端的javascript框架 npm install web3 truffle - 以太坊开发框架 npm install -g truffle Metamask - 以太坊钱包，基于Chrome的插件 Ganache - 用于本地的虚拟以太坊区块链， 并且自动创建了用于测试的10个本地的区块链账号 Remix - https://remix.ethereum.org/ 以太坊官方推荐的智能合约开发IDE,可以在浏览器中快速部署测试智能合约。 配置Metamask连接Ganache本地环境，Ganache默认的监听端口为7545，所以需要设置Metamask，如下，点击 “Custom RPC”，然后设置本地虚拟区块链的地址
配置完之后，就可以导入Ganache默认创建的账号，
点击右侧的钥匙(show key), 从弹出的界面中拷贝账号的token，然后通过点击Metamask右上角的头像，通过"Import Account"，粘贴刚才复制的token，导入，就可以看到新导入的账号，并且该账号已经默认的有了100个ETH了。
创建智能合约 在Remix编辑器中编写一个简单的智能合约 - HelloWorld
pragma solidity ^0.4.0; contract HelloWorld { string public name; function HelloWorld() public { name = "Liping"; } function setName(string _name) public { name = _name; } } 合约编好之后，点击 “Run” 标签，在“Environment”中选择"Web3 Provider"...</p></section><footer class=entry-footer>2018-05-05&nbsp;·&nbsp;2 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to 以太坊智能合约开发入门" href=https://technotes.guru/posts/2018/blockchain-eth-chaincode/></a></article><article class=post-entry><header class=entry-header><h2>解决 Spring Boot Process finished with exit code 0的问题</h2></header><section class=entry-content><p>问题描述 在启动Spring Boot项目的时候，直接返回Process finished with exit code 0退出了，无法正常启动。
. ____ _ __ _ _ /\\ / ___'_ __ _ _(_)_ __ __ _ \ \ \ \ ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/ ___)| |_)| | | | | || (_| | ) ) ) ) ' |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2....</p></section><footer class=entry-footer>2018-05-05&nbsp;·&nbsp;1 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to 解决 Spring Boot Process finished with exit code 0的问题" href=https://technotes.guru/posts/2018/spring-boot-process-finished-with-exit-code-0/></a></article><article class=post-entry><header class=entry-header><h2>Why I hate Ant</h2></header><section class=entry-content><p>Apache Ant, yes, this is a great Java build tool I know of. It’s free (in all senses of the word), it’s a defacto standard in the 20th I think, and it generally works.
But to working with the plain ant scripts is really painfully
Write ant scripts are complex and verbose. Ant build files are generally typeless. There is no grand schema or DTD they can validate against. Hardly to maintain the ant scripts It’s almost impossible re-use someone else’s Ant target out of the box....</p></section><footer class=entry-footer>2017-10-10&nbsp;·&nbsp;2 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to Why I hate Ant" href=https://technotes.guru/posts/2017/why-i-hate-ant/></a></article><article class=post-entry><header class=entry-header><h2>Running Spring Batch on Multiple Databases in Parallel</h2></header><section class=entry-content><p>The Question I’ve created a Spring batch application using Spring boot, and I have a Job with 9 steps. These steps are using a DataSource which I created its bean in a configuration file as follows:
@Configuration public class DatabaseConfig { @ConfigurationProperties(prefix = "spring.datasource") @Bean @Primary public DataSource dataSource(){ return DataSourceBuilder.create().build(); } } This DataSource is using properties declared in the application.yml file:
spring: datasource: url: jdbc:mysql://localhost:3306/db_01?zeroDateTimeBehavior=convertToNull username: xxxx password: **** So far, all works as expected....</p></section><footer class=entry-footer>2017-06-06&nbsp;·&nbsp;3 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to Running Spring Batch on Multiple Databases in Parallel" href=https://technotes.guru/posts/2017/running-spring-batch-on-multiple-databases-in-parallel/></a></article><article class=post-entry><header class=entry-header><h2>一个小项目的回顾</h2></header><section class=entry-content><p>最近的一个项目，四个开发人员，大概做了一个月多一点，从需求，到最终代码的完成。
写思考，我想，主要还是要回顾一下在项目中遇到的问题，或是有什么比较好的经验，新的体会值得记录下来，以供以后参考。在这里，主要是要思考两个方面的问题，数据库和测试。
数据库
对于数据库，在j道上面有这样一篇文章 《数据库已死》 ，其主要思想，个人感觉，主要还是对象与关系的问题，我们现在的主流已经是面向对象，但现在，可能很多公司仍以数据库建模作为其一条主线，首先进行数据建模，erwin，powerdesigner(后注: 实际上PowerDesigner的Logical Data Model的设计非常的强大，可以首先设计Logical Data Model, 然后转换成Physical Data Model，最后生成DDL)，然后创建相应的表，下面，就使用myeclipse,hibernate tools等生成相应的实体类，以及相应的映射文件。包括以前的几个项目，者是在开始花了大量的时间进行数据库的设计，中途加入的项目，也会在进入项目组的开始阶段让你熟悉其数据库的表结构，当面对大量的表的时候，看着E-R图上面的“蜘蛛网”的时候，可能，就已经晕了。
实际上，在面向对象的时代，数据库只是状态持久化的一种手段，数据库的表结构完全可以通过Hibernate等ORM工具自动生成。
在这个小项目中，前期，并没有花大多的时候在数据库的设计上，在初期建模了一些核心对象，创建相应的实体类，加上相应的注解，借助于hibernate的hbm2ddl，完全可以由hibernate自动生成相应的表结构。当增加新的对象的时候，也只需要定义其类结构。
并且，可以提供不同的sessionfactory，分别针对测试等环境，也可以做到一定程度的database migration。
测试
TDD，BDD，持续集成~~~~等等，不知道有多少公司实施了，并且实施的情况如何。在以前的项目中，最怕的，就是测试数据依赖于其它的模块，当跑一次测试，还需要去跑一下由其它小组开发的模块，当对该模块的业务不太了解的时候，测试起来，还是比较麻烦的，还有可能需要麻烦其它小组的人员来为我们提供相应的测试数据。
这种情况，其中一个原因，测试代码太少。所以在这个项目中，针对一些核心的，或是较复杂的业务逻辑，都提供了相应的测试代码(当然，这里有一个粒度的问题)，虽然在开发过程中，需要抽出一部分时间来编写相应的测试代码，但在实际过程中，效果还是比较明显的。</p></section><footer class=entry-footer>2009-08-08&nbsp;·&nbsp;1 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to 一个小项目的回顾" href=https://technotes.guru/posts/2009/a-project-retrospection/></a></article><article class=post-entry><header class=entry-header><h2>Rails生成Ext Tree</h2></header><section class=entry-content><p>树形菜单是在开发中经常会遇到的一个功能，RoR的这个设计对于大数据量tree结构是最好的，比如一些常见的查询都可以避免循环或者递归抓取, 而且通过在lft, rgt上设置索引能够达到最好的查询效率。(发布于JavaEye)
在Rails中使用has_one 、has_many 、belongs_to 和 has_and_belongs_to_may 来声明关系型数据库中的一对一，一对多和多对多的关系，但当想以树形的数据结构来表示分类的时候，这些基本的关联功能并不够，Rails在has_XXX关系的基础上，提供了acts as的扩展功能，如acts_as_list 、acts_as_tree 、 acts_as_nested_set。acts_as_tree就提供树状的结构来组织记录。(不知道为什么Rails2.0以后会取消掉，需要通过插件的方式来安装)
acts_as_nested_set的官方解释：
A Nested Set is similar to a tree from ActsAsTree. However the nested set allows building of the entire hierarchy at once instead of querying each nodes children, and their children. When destroying an object, a before_destroy trigger prunes the rest of the branch of object under the current object.
上面是引用自rubyonrails.org上的对于acts_as_nested_set的描述，并提供了一个简单的示例：
SQL脚本：
create table nested_objects ( id int(11) unsigned not null auto_increment, parent_id int(11), lft int(11), rgt int(11), name varchar(32), primary key (id) ); Ruby Model:...</p></section><footer class=entry-footer>2008-03-03&nbsp;·&nbsp;2 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to Rails生成Ext Tree" href=https://technotes.guru/posts/2008/rails-ext-tree/></a></article><article class=post-entry><header class=entry-header><h2>Generic Data Access Objects －范型DAO类设计模式</h2></header><section class=entry-content><p>Generic Data Access Objects －范型DAO类设计模式, DAO模式是最为经典的JAVA EE模式之一, 特别是自JDK5之后增加的泛型支持，大大增加了DAO的可复用性。(发布于JavaEye)
普通数据访问对象，这个是Hibernate官方网站上面的一个DAO类的设计模式，基于JDK5.0范型支持,文章地址如下：
Generic Data Access Objects 我下面的代码与Hibernate官网上提供的有点不同。 首先定义DAO类的接口IGenericDAO，该接口定义了共同的CRUD操作：
/** * 定义通用的CRUD操作 */ public interface IGenericDAO &lt;T, ID extends Serializable> { // 通过主键标识查找某个对象。 public T findById(ID id); // 通过主键标识查找某个对象，可以锁定表中对应的记录。 T findById(ID id, boolean lock); // 得到所有的对象。 List&lt;T> findAll(); // 通过给定的一个对象，查找与其匹配的对象。 List&lt;T> findByExample(T exampleInstance); // 持久化对象。 T makePersistent(T entity); // 删除对象。 void makeTransient(T entity); } 下面是使用Hibernate针对该接口的实现GenericDAOHibernate:
/** * 这是针对IGenericDAO接口的Hibernate实现，完成通用的CRUD操作。 * @param T POJO类 * @param ID POJO类的主键标识符 * @param DAOImpl 针对每一个POJO类的DAO类实现 */ public abstract class GenericDAOHibernate &lt;T,ID extends Serializable, DAOImpl extends IGenericDAO&lt;T, ID>> implements IGenericDAO&lt;T,ID> { private Class&lt;T> persistentClass; protected Session session; public GenericDAOHibernate() { this....</p></section><footer class=entry-footer>2007-04-04&nbsp;·&nbsp;2 min&nbsp;·&nbsp;TechNotes</footer><a class=entry-link aria-label="post link to Generic Data Access Objects －范型DAO类设计模式" href=https://technotes.guru/posts/2007/the-generic-dao/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://technotes.guru/>« Prev Page</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://technotes.guru/>TechNotes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>